name: Toggle IT Line

on:
  schedule:
    - cron: "0 0 * * *"  # ทุกวันตอนเที่ยงคืน UTC (7 โมงเช้าไทย)
  workflow_dispatch:

jobs:
  toggle-line:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Setup Git identity
        run: |
          git config --global user.name "Auto Commit Bot"
          git config --global user.email "noreply@example.com"

      - name: Toggle line in README
        run: |
          if grep -q '| 🔸 IT kmutt Student |' README.md; then
            echo "🔻 Removing IT line"
            sed -i '/| 🔸 IT kmutt Student |/d' README.md
            git commit -am "Remove IT student line"
          else
            echo "🔺 Adding IT line back"
            sed -i '/<h1>Nattaphan Pumipak<\/h1>/a\  <h3>| 🔸 IT kmutt Student |</h3>' README.md
            git commit -am "Add IT student line back"
          fi

      - name: Push commit
        run: git push
